(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{303:function(e,t,o){"use strict";var s=o(301),i=function(){function e(e){this.scroll=e,this.wheelEndTimer=0,this.wheelMoveTimer=0,this.wheelStart=!1,this.init()}return e.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.registerEvent()},e.prototype.handleBScroll=function(){this.scroll.registerType(["alterOptions","mousewheelStart","mousewheelMove","mousewheelEnd"])},e.prototype.handleOptions=function(){var e=!0===this.scroll.options.mouseWheel?{}:this.scroll.options.mouseWheel;this.mouseWheelOpt=Object(s.r)({speed:20,invert:!1,easeTime:300,discreteTime:400,throttleTime:0,dampingFactor:.1},e)},e.prototype.handleHooks=function(){this.hooksFn=[],this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},e.prototype.registerEvent=function(){this.eventRegister=new s.f(this.scroll.scroller.wrapper,[{name:"wheel",handler:this.wheelHandler.bind(this)},{name:"mousewheel",handler:this.wheelHandler.bind(this)},{name:"DOMMouseScroll",handler:this.wheelHandler.bind(this)}])},e.prototype.registerHooks=function(e,t,o){e.on(t,o,this),this.hooksFn.push([e,t,o])},e.prototype.wheelHandler=function(e){if(this.scroll.enabled){this.beforeHandler(e),this.wheelStart||(this.wheelStartHandler(e),this.wheelStart=!0);var t=this.getWheelDelta(e);this.wheelMoveHandler(t),this.wheelEndDetector(t)}},e.prototype.wheelStartHandler=function(e){this.cleanCache();var t=this.scroll.scroller,o=t.scrollBehaviorX,i=t.scrollBehaviorY;o.setMovingDirection(s.b.Default),i.setMovingDirection(s.b.Default),o.setDirection(s.b.Default),i.setDirection(s.b.Default),this.scroll.trigger(this.scroll.eventTypes.alterOptions,this.mouseWheelOpt),this.scroll.trigger(this.scroll.eventTypes.mousewheelStart)},e.prototype.cleanCache=function(){this.deltaCache=[]},e.prototype.wheelMoveHandler=function(e){var t=this,o=this.mouseWheelOpt,s=o.throttleTime,i=o.dampingFactor;if(s&&this.wheelMoveTimer)this.deltaCache.push(e);else{var l=this.deltaCache.reduce((function(e,t){return{x:e.x+t.x,y:e.y+t.y}}),{x:0,y:0});this.cleanCache();var n=this.scroll.scroller,r=n.scrollBehaviorX,h=n.scrollBehaviorY;r.setMovingDirection(-e.directionX),h.setMovingDirection(-e.directionY),r.setDirection(e.x),h.setDirection(e.y);var c=r.performDampingAlgorithm(Math.round(e.x)+l.x,i),a=h.performDampingAlgorithm(Math.round(e.y)+l.x,i);if(!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove,{x:c,y:a})){var u=this.getEaseTime();c===this.scroll.x&&a===this.scroll.y||this.scroll.scrollTo(c,a,u)}s&&(this.wheelMoveTimer=window.setTimeout((function(){t.wheelMoveTimer=0}),s))}},e.prototype.wheelEndDetector=function(e){var t=this;window.clearTimeout(this.wheelEndTimer),this.wheelEndTimer=window.setTimeout((function(){t.wheelStart=!1,window.clearTimeout(t.wheelMoveTimer),t.wheelMoveTimer=0,t.scroll.trigger(t.scroll.eventTypes.mousewheelEnd,e)}),this.mouseWheelOpt.discreteTime)},e.prototype.getWheelDelta=function(e){var t=this.mouseWheelOpt,o=t.speed,i=0,l=0,n=t.invert?s.b.Negative:s.b.Positive;switch(!0){case"deltaX"in e:1===e.deltaMode?(i=-e.deltaX*o,l=-e.deltaY*o):(i=-e.deltaX,l=-e.deltaY);break;case"wheelDeltaX"in e:i=e.wheelDeltaX/120*o,l=e.wheelDeltaY/120*o;break;case"wheelDelta"in e:i=l=e.wheelDelta/120*o;break;case"detail"in e:i=l=-e.detail/3*o}return i*=n,l*=n,this.scroll.hasVerticalScroll||(i=l,l=0),this.scroll.hasHorizontalScroll||(i=0),{x:i,y:l,directionX:i>0?s.b.Negative:i<0?s.b.Positive:s.b.Default,directionY:l>0?s.b.Negative:l<0?s.b.Positive:s.b.Default}},e.prototype.beforeHandler=function(e){var t=this.scroll.options,o=t.preventDefault,i=t.stopPropagation,l=t.preventDefaultException;o&&!Object(s.H)(e.target,l)&&e.preventDefault(),i&&e.stopPropagation()},e.prototype.getEaseTime=function(){var e=this.mouseWheelOpt.easeTime;return e<100&&Object(s.O)("easeTime should be greater than 100.If mouseWheel easeTime is too small,scrollEnd will be triggered many times."),Math.max(e,100)},e.prototype.destroy=function(){this.eventRegister.destroy(),window.clearTimeout(this.wheelEndTimer),window.clearTimeout(this.wheelMoveTimer),this.hooksFn.forEach((function(e){var t=e[0],o=e[1],s=e[2];t.off(o,s)}))},e.pluginName="mouseWheel",e.applyOrder=s.a.Pre,e}();t.a=i},308:function(e,t,o){"use strict";var s=o(301),i=[{key:"finishPullDown",name:"finishPullDown"},{key:"openPullDown",name:"openPullDown"},{key:"closePullDown",name:"closePullDown"},{key:"autoPullDownRefresh",name:"autoPullDownRefresh"}].map((function(e){return{key:e.key,sourceKey:"plugins.pullDownRefresh."+e.name}})),l=function(){function e(e){this.scroll=e,this.pulling=!1,this.init()}return e.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullDownRefresh),this.handleHooks(),this.watch()},e.prototype.handleBScroll=function(){this.scroll.registerType(["pullingDown"]),this.scroll.proxy(i)},e.prototype.handleOptions=function(e){void 0===e&&(e={}),e=!0===e?{}:e;this.options=Object(s.r)({threshold:90,stop:40},e),this.scroll.options.probeType=s.j.Realtime},e.prototype.handleHooks=function(){var e=this;this.hooksFn=[];var t=this.scroll.scroller,o=t.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY=o.minScrollPos,this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,(function(){e.finishPullDown()})),this.registerHooks(o.hooks,o.hooks.eventTypes.computeBoundary,(function(t){t.maxScrollPos>0&&(t.maxScrollPos=-1),t.minScrollPos=e.currentMinScrollY})),this.scroll.eventTypes.alterOptions&&(this.registerHooks(this.scroll,this.scroll.eventTypes.alterOptions,(function(e){e.discreteTime=300,e.easeTime=350})),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,(function(){t.hooks.trigger(t.hooks.eventTypes.end)})))},e.prototype.registerHooks=function(e,t,o){e.on(t,o,this),this.hooksFn.push([e,t,o])},e.prototype.watch=function(){var e=this.scroll.scroller;this.watching=!0,this.registerHooks(e.hooks,e.hooks.eventTypes.end,this.checkPullDown)},e.prototype.unwatch=function(){var e=this.scroll.scroller;this.watching=!1,e.hooks.off(e.hooks.eventTypes.end,this.checkPullDown)},e.prototype.checkPullDown=function(){var e=this.options,t=e.threshold,o=e.stop;return!(this.scroll.y<t)&&(this.pulling||(this.modifyBehaviorYBoundary(o),this.pulling=!0,this.scroll.trigger("pullingDown")),this.scroll.scrollTo(this.scroll.x,o,this.scroll.options.bounceTime,s.p.bounce),this.pulling)},e.prototype.modifyBehaviorYBoundary=function(e){var t=this.scroll.scroller.scrollBehaviorY;this.cachedOriginanMinScrollY=t.minScrollPos,this.currentMinScrollY=e,t.computeBoundary()},e.prototype.finishPullDown=function(){if(!0===this.pulling){var e=this.scroll.scroller.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY,e.computeBoundary(),this.pulling=!1,this.scroll.resetPosition(this.scroll.options.bounceTime,s.p.bounce)}},e.prototype.openPullDown=function(e){void 0===e&&(e={}),this.handleOptions(e),this.watching||this.watch()},e.prototype.closePullDown=function(){this.unwatch()},e.prototype.autoPullDownRefresh=function(){var e=this.options,t=e.threshold,o=e.stop;!this.pulling&&this.watching&&(this.pulling=!0,this.modifyBehaviorYBoundary(o),this.scroll.scrollTo(this.scroll.x,t),this.scroll.trigger("pullingDown"),this.scroll.scrollTo(this.scroll.x,o,this.scroll.options.bounceTime,s.p.bounce))},e.pluginName="pullDownRefresh",e}();t.a=l},347:function(e,t,o){},415:function(e,t,o){"use strict";var s=o(347);o.n(s).a},552:function(e,t,o){"use strict";o.r(t);o(162),o(7),o(92);var s=o(42),i=o(302),l=o(308),n=o(303);function r(){for(var e=30*h,t=[],o=30*(h+1);o>e;o--)t.push(o);return t}i.a.use(l.a),i.a.use(n.a);var h=0,c={data:function(){return{beforePullDown:!0,isPullingDown:!1,dataList:r()}},mounted:function(){this.initBscroll()},methods:{initBscroll:function(){this.bscroll=new i.a(this.$refs.scroll,{scrollY:!0,bounceTime:800,mouseWheel:!0,pullDownRefresh:{threshold:70,stop:56}}),this.bscroll.on("pullingDown",this.pullingDownHandler),this.bscroll.on("scroll",this.scrollHandler),this.bscroll.on("scrollEnd",(function(e){console.log("scrollEnd")}))},scrollHandler:function(e){console.log(e.y)},pullingDownHandler:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("trigger pullDown"),e.beforePullDown=!1,e.isPullingDown=!0,h+=1,t.next=6,e.requestData();case 6:e.isPullingDown=!1,e.finishPullDown();case 8:case"end":return t.stop()}}),t)})))()},finishPullDown:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return 600,t.next=3,new Promise((function(t){setTimeout((function(){e.bscroll.finishPullDown(),t()}),600)}));case 3:setTimeout((function(){e.beforePullDown=!0,e.bscroll.refresh()}),800);case 4:case"end":return t.stop()}}),t)})))()},requestData:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.ajaxGet();case 3:o=t.sent,e.dataList=o.concat(e.dataList),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},ajaxGet:function(){return new Promise((function(e){setTimeout((function(){var t=r();e(t)}),1e3)}))}}},a=(o(415),o(40)),u=Object(a.a)(c,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"mouse-wheel-pulldown"},[o("div",{ref:"scroll",staticClass:"pulldown-wrapper"},[o("div",{staticClass:"pulldown-content"},[o("div",{staticClass:"pulldown-tips"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.beforePullDown,expression:"beforePullDown"}]},[o("span",[e._v("Pull Down and refresh")])]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.beforePullDown,expression:"!beforePullDown"}]},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.isPullingDown,expression:"isPullingDown"}]},[o("span",[e._v("Loading...")])]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.isPullingDown,expression:"!isPullingDown"}]},[o("span",[e._v("Refresh success")])])])]),e._v(" "),o("ul",{staticClass:"pulldown-list"},e._l(e.dataList,(function(t){return o("li",{key:t,staticClass:"pulldown-list-item"},[e._v("\n          "+e._s("I am item "+t+" ")+"\n        ")])})),0)])])])}),[],!1,null,"5dd66a23",null);t.default=u.exports}}]);