(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{350:function(o,t,e){"use strict";var s,n,r=e(345),l=[{key:"finishPullDown",name:"finishPullDown"},{key:"openPullDown",name:"openPullDown"},{key:"closePullDown",name:"closePullDown"},{key:"autoPullDownRefresh",name:"autoPullDownRefresh"}].map((function(o){return{key:o.key,sourceKey:"plugins.pullDownRefresh."+o.name}}));!function(o){o[o.DEFAULT=0]="DEFAULT",o[o.MOVING=1]="MOVING",o[o.FETCHING=2]="FETCHING"}(s||(s={})),function(o){o[o.DEFAULT=0]="DEFAULT",o[o.INSIDE=1]="INSIDE",o[o.OUTSIDE=2]="OUTSIDE"}(n||(n={}));var i=function(){function o(o){this.scroll=o,this.pulling=s.DEFAULT,this.thresholdBoundary=n.DEFAULT,this.init()}return o.prototype.setPulling=function(o){this.pulling=o},o.prototype.setThresholdBoundary=function(o){this.thresholdBoundary=o},o.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullDownRefresh),this.handleHooks(),this.watch()},o.prototype.handleBScroll=function(){this.scroll.registerType(["pullingDown","enterThreshold","leaveThreshold"]),this.scroll.proxy(l)},o.prototype.handleOptions=function(o){void 0===o&&(o={}),o=!0===o?{}:o;this.options=Object(r.t)({threshold:90,stop:40},o),this.scroll.options.probeType=r.j.Realtime},o.prototype.handleHooks=function(){var o=this;this.hooksFn=[];var t=this.scroll.scroller,e=t.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY=e.minScrollPos,this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,(function(){o.finishPullDown()})),this.registerHooks(e.hooks,e.hooks.eventTypes.computeBoundary,(function(t){t.maxScrollPos>0&&(t.maxScrollPos=-1),t.minScrollPos=o.currentMinScrollY})),this.hasMouseWheelPlugin()&&(this.registerHooks(this.scroll,this.scroll.eventTypes.alterOptions,(function(o){o.discreteTime=300,o.easeTime=350})),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,(function(){t.hooks.trigger(t.hooks.eventTypes.end)})))},o.prototype.registerHooks=function(o,t,e){o.on(t,e,this),this.hooksFn.push([o,t,e])},o.prototype.hasMouseWheelPlugin=function(){return!!this.scroll.eventTypes.alterOptions},o.prototype.watch=function(){var o=this.scroll.scroller;this.watching=!0,this.registerHooks(o.hooks,o.hooks.eventTypes.end,this.checkPullDown),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollStart,this.resetStateBeforeScrollStart),this.registerHooks(this.scroll,this.scroll.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},o.prototype.resetStateBeforeScrollStart=function(){this.isFetchingStatus()||(this.setPulling(s.MOVING),this.setThresholdBoundary(n.DEFAULT))},o.prototype.checkLocationOfThresholdBoundary=function(){if(this.pulling===s.MOVING){var o=this.scroll,t=this.thresholdBoundary!==n.INSIDE&&this.locateInsideThresholdBoundary(),e=this.thresholdBoundary!==n.OUTSIDE&&!this.locateInsideThresholdBoundary();t&&(this.setThresholdBoundary(n.INSIDE),o.trigger("enterThreshold")),e&&(this.setThresholdBoundary(n.OUTSIDE),o.trigger("leaveThreshold"))}},o.prototype.locateInsideThresholdBoundary=function(){return this.scroll.y<=this.options.threshold},o.prototype.unwatch=function(){var o=this.scroll,t=o.scroller;this.watching=!1,t.hooks.off(t.hooks.eventTypes.end,this.checkPullDown),o.off(o.eventTypes.scrollStart,this.resetStateBeforeScrollStart),o.off(o.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&o.off(o.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},o.prototype.checkPullDown=function(){var o=this.options,t=o.threshold,e=o.stop;return!(this.scroll.y<t)&&(this.pulling===s.MOVING&&(this.modifyBehaviorYBoundary(e),this.setPulling(s.FETCHING),this.scroll.trigger("pullingDown")),this.scroll.scrollTo(this.scroll.x,e,this.scroll.options.bounceTime,r.r.bounce),this.isFetchingStatus())},o.prototype.isFetchingStatus=function(){return this.pulling===s.FETCHING},o.prototype.modifyBehaviorYBoundary=function(o){var t=this.scroll.scroller.scrollBehaviorY;this.cachedOriginanMinScrollY=t.minScrollPos,this.currentMinScrollY=o,t.computeBoundary()},o.prototype.finishPullDown=function(){if(this.isFetchingStatus()){var o=this.scroll.scroller.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY,o.computeBoundary(),this.setPulling(s.DEFAULT),this.scroll.resetPosition(this.scroll.options.bounceTime,r.r.bounce)}},o.prototype.openPullDown=function(o){void 0===o&&(o={}),this.handleOptions(o),this.watching||this.watch()},o.prototype.closePullDown=function(){this.unwatch()},o.prototype.autoPullDownRefresh=function(){var o=this.options,t=o.threshold,e=o.stop;!this.isFetchingStatus()&&this.watching&&(this.modifyBehaviorYBoundary(e),this.scroll.trigger(this.scroll.eventTypes.scrollStart),this.scroll.scrollTo(this.scroll.x,t),this.setPulling(s.FETCHING),this.scroll.trigger("pullingDown"),this.scroll.scrollTo(this.scroll.x,e,this.scroll.options.bounceTime,r.r.bounce))},o.pluginName="pullDownRefresh",o}();t.a=i},417:function(o,t,e){},588:function(o,t,e){"use strict";e(417)},647:function(o,t,e){"use strict";e.r(t);var s=e(50),n=(e(183),e(8),e(110),e(346)),r=e(350);function l(){for(var o=30*i,t=[],e=30*(i+1);e>o;e--)t.push(e);return t}n.a.use(r.a);var i=0,h={data:function(){return{beforePullDown:!0,isPullingDown:!1,dataList:l()}},mounted:function(){this.initBscroll()},methods:{initBscroll:function(){this.bscroll=new n.a(this.$refs.bsWrapper,{scrollY:!0,bounceTime:800,useTransition:!1,pullDownRefresh:{threshold:70,stop:56}}),this.bscroll.on("pullingDown",this.pullingDownHandler),this.bscroll.on("scroll",this.scrollHandler),this.bscroll.on("scrollEnd",(function(o){console.log("scrollEnd")}))},scrollHandler:function(o){console.log(o.y)},pullingDownHandler:function(){var o=this;return Object(s.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("trigger pullDown"),o.beforePullDown=!1,o.isPullingDown=!0,i+=1,t.next=6,o.requestData();case 6:o.isPullingDown=!1,o.finishPullDown();case 8:case"end":return t.stop()}}),t)})))()},finishPullDown:function(){var o=this;return Object(s.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.bscroll.finishPullDown(),setTimeout((function(){o.beforePullDown=!0,o.bscroll.refresh()}),900);case 2:case"end":return t.stop()}}),t)})))()},requestData:function(){var o=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.ajaxGet();case 3:e=t.sent,o.dataList=e.concat(o.dataList),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},ajaxGet:function(){return new Promise((function(o){setTimeout((function(){var t=l();o(t)}),1e3)}))}}},c=(e(588),e(30)),u=Object(c.a)(h,(function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{staticClass:"pulldown"},[e("div",{ref:"bsWrapper",staticClass:"pulldown-bswrapper"},[e("div",{staticClass:"pulldown-scroller"},[e("div",{staticClass:"pulldown-wrapper"},[e("div",{directives:[{name:"show",rawName:"v-show",value:o.beforePullDown,expression:"beforePullDown"}]},[e("span",[o._v("Pull Down and refresh")])]),o._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!o.beforePullDown,expression:"!beforePullDown"}]},[e("div",{directives:[{name:"show",rawName:"v-show",value:o.isPullingDown,expression:"isPullingDown"}]},[e("span",[o._v("Loading...")])]),o._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!o.isPullingDown,expression:"!isPullingDown"}]},[e("span",[o._v("Refresh success")])])])]),o._v(" "),e("ul",{staticClass:"pulldown-list"},o._l(o.dataList,(function(t){return e("li",{key:t,staticClass:"pulldown-list-item"},[o._v(o._s("I am item "+t+" "))])})),0)])])])}),[],!1,null,"bcdaba5c",null);t.default=u.exports}}]);