<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BetterScroll&#39;s &quot;diagnosis&quot; | BetterScroll 2.0</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="shortcut icon" href="/docs/assets/bs.ico" type="images/x-icon">
    <script src="https://www.googletagmanager.com/gtag/js?id=G-7E85TW7P27"></script>
    <script type="text/javascript">
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-7E85TW7P27');
    </script>
    <meta name="description" content="Make Scroll Perfect">
    
    <link rel="preload" href="/docs/assets/css/0.styles.bfcfa8b0.css" as="style"><link rel="preload" href="/docs/assets/js/app.49c510b7.js" as="script"><link rel="preload" href="/docs/assets/js/6.78beaf32.js" as="script"><link rel="preload" href="/docs/assets/js/61.653b9ae3.js" as="script"><link rel="prefetch" href="/docs/assets/js/1.8668a212.js"><link rel="prefetch" href="/docs/assets/js/10.b6d20dac.js"><link rel="prefetch" href="/docs/assets/js/100.112398ec.js"><link rel="prefetch" href="/docs/assets/js/101.49055772.js"><link rel="prefetch" href="/docs/assets/js/102.a8cecad8.js"><link rel="prefetch" href="/docs/assets/js/103.476feef7.js"><link rel="prefetch" href="/docs/assets/js/104.c2c39df6.js"><link rel="prefetch" href="/docs/assets/js/105.5518a3e9.js"><link rel="prefetch" href="/docs/assets/js/106.7f63c400.js"><link rel="prefetch" href="/docs/assets/js/107.120bdae4.js"><link rel="prefetch" href="/docs/assets/js/108.199e433b.js"><link rel="prefetch" href="/docs/assets/js/109.e7287433.js"><link rel="prefetch" href="/docs/assets/js/11.7fded151.js"><link rel="prefetch" href="/docs/assets/js/12.2f5b6423.js"><link rel="prefetch" href="/docs/assets/js/13.48d7535e.js"><link rel="prefetch" href="/docs/assets/js/14.6377f715.js"><link rel="prefetch" href="/docs/assets/js/15.2a5bb021.js"><link rel="prefetch" href="/docs/assets/js/16.03557842.js"><link rel="prefetch" href="/docs/assets/js/17.2f437df4.js"><link rel="prefetch" href="/docs/assets/js/18.8d4d01d9.js"><link rel="prefetch" href="/docs/assets/js/19.75511ca5.js"><link rel="prefetch" href="/docs/assets/js/2.881fe9ac.js"><link rel="prefetch" href="/docs/assets/js/20.156dfe6e.js"><link rel="prefetch" href="/docs/assets/js/21.a9c14cf4.js"><link rel="prefetch" href="/docs/assets/js/22.df99bdcc.js"><link rel="prefetch" href="/docs/assets/js/23.a8f99ebb.js"><link rel="prefetch" href="/docs/assets/js/24.36becf82.js"><link rel="prefetch" href="/docs/assets/js/25.36cdb49b.js"><link rel="prefetch" href="/docs/assets/js/26.a3c372af.js"><link rel="prefetch" href="/docs/assets/js/27.d6f4bd94.js"><link rel="prefetch" href="/docs/assets/js/28.9891e947.js"><link rel="prefetch" href="/docs/assets/js/29.bbee1e24.js"><link rel="prefetch" href="/docs/assets/js/30.4799acfb.js"><link rel="prefetch" href="/docs/assets/js/31.70d1dcab.js"><link rel="prefetch" href="/docs/assets/js/32.86636612.js"><link rel="prefetch" href="/docs/assets/js/33.be1aa230.js"><link rel="prefetch" href="/docs/assets/js/34.54dd69dc.js"><link rel="prefetch" href="/docs/assets/js/35.7300612b.js"><link rel="prefetch" href="/docs/assets/js/36.d9154801.js"><link rel="prefetch" href="/docs/assets/js/37.24c29120.js"><link rel="prefetch" href="/docs/assets/js/38.797aa0a1.js"><link rel="prefetch" href="/docs/assets/js/39.3277d35b.js"><link rel="prefetch" href="/docs/assets/js/40.843c28e5.js"><link rel="prefetch" href="/docs/assets/js/41.bb3c0467.js"><link rel="prefetch" href="/docs/assets/js/42.7edb1aca.js"><link rel="prefetch" href="/docs/assets/js/43.a8fc8f6b.js"><link rel="prefetch" href="/docs/assets/js/44.418d087f.js"><link rel="prefetch" href="/docs/assets/js/45.725bd4f8.js"><link rel="prefetch" href="/docs/assets/js/46.8c2b390d.js"><link rel="prefetch" href="/docs/assets/js/47.be7a5f63.js"><link rel="prefetch" href="/docs/assets/js/48.396d979d.js"><link rel="prefetch" href="/docs/assets/js/49.122ad089.js"><link rel="prefetch" href="/docs/assets/js/5.a6f9dbdd.js"><link rel="prefetch" href="/docs/assets/js/50.b19f8ca3.js"><link rel="prefetch" href="/docs/assets/js/51.cb791b22.js"><link rel="prefetch" href="/docs/assets/js/52.a0a34e23.js"><link rel="prefetch" href="/docs/assets/js/53.e4b0f59a.js"><link rel="prefetch" href="/docs/assets/js/54.bfd2e724.js"><link rel="prefetch" href="/docs/assets/js/55.0cc122d8.js"><link rel="prefetch" href="/docs/assets/js/56.e5233103.js"><link rel="prefetch" href="/docs/assets/js/57.e72be632.js"><link rel="prefetch" href="/docs/assets/js/58.78c25fb6.js"><link rel="prefetch" href="/docs/assets/js/59.a99583b5.js"><link rel="prefetch" href="/docs/assets/js/60.420f82aa.js"><link rel="prefetch" href="/docs/assets/js/62.7866e2fc.js"><link rel="prefetch" href="/docs/assets/js/63.58c71e5f.js"><link rel="prefetch" href="/docs/assets/js/64.3ec18ae5.js"><link rel="prefetch" href="/docs/assets/js/65.fa456bbc.js"><link rel="prefetch" href="/docs/assets/js/66.bb08c079.js"><link rel="prefetch" href="/docs/assets/js/67.9aca9040.js"><link rel="prefetch" href="/docs/assets/js/68.a47686ba.js"><link rel="prefetch" href="/docs/assets/js/69.5d2fe95a.js"><link rel="prefetch" href="/docs/assets/js/7.a2819810.js"><link rel="prefetch" href="/docs/assets/js/70.fb424530.js"><link rel="prefetch" href="/docs/assets/js/71.e7320cc5.js"><link rel="prefetch" href="/docs/assets/js/72.1374067e.js"><link rel="prefetch" href="/docs/assets/js/73.88c0829c.js"><link rel="prefetch" href="/docs/assets/js/74.5c7a4ef6.js"><link rel="prefetch" href="/docs/assets/js/75.1a591096.js"><link rel="prefetch" href="/docs/assets/js/76.38a816b1.js"><link rel="prefetch" href="/docs/assets/js/77.3062ad5d.js"><link rel="prefetch" href="/docs/assets/js/78.b5db4df3.js"><link rel="prefetch" href="/docs/assets/js/79.c048adbb.js"><link rel="prefetch" href="/docs/assets/js/8.09139ea4.js"><link rel="prefetch" href="/docs/assets/js/80.e0b238ec.js"><link rel="prefetch" href="/docs/assets/js/81.ea9343b5.js"><link rel="prefetch" href="/docs/assets/js/82.75e4cb53.js"><link rel="prefetch" href="/docs/assets/js/83.5ca9608e.js"><link rel="prefetch" href="/docs/assets/js/84.a00dac33.js"><link rel="prefetch" href="/docs/assets/js/85.4aa466e0.js"><link rel="prefetch" href="/docs/assets/js/86.3ba657bc.js"><link rel="prefetch" href="/docs/assets/js/87.211f4525.js"><link rel="prefetch" href="/docs/assets/js/88.7462b027.js"><link rel="prefetch" href="/docs/assets/js/89.c5ebdff0.js"><link rel="prefetch" href="/docs/assets/js/9.e543c1dd.js"><link rel="prefetch" href="/docs/assets/js/90.831435ce.js"><link rel="prefetch" href="/docs/assets/js/91.258f5d48.js"><link rel="prefetch" href="/docs/assets/js/92.e2e5b9d5.js"><link rel="prefetch" href="/docs/assets/js/93.87d9fe19.js"><link rel="prefetch" href="/docs/assets/js/94.57670642.js"><link rel="prefetch" href="/docs/assets/js/95.675a0010.js"><link rel="prefetch" href="/docs/assets/js/96.c4b75037.js"><link rel="prefetch" href="/docs/assets/js/97.0d7ac14c.js"><link rel="prefetch" href="/docs/assets/js/98.5a1abd43.js"><link rel="prefetch" href="/docs/assets/js/99.b70e60d1.js"><link rel="prefetch" href="/docs/assets/js/vendors~docsearch.93c2ffca.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.bfcfa8b0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/en-US/" class="home-link router-link-active"><img src="https://dpubstatic.udache.com/static/dpubimg/t_L6vAgQ-E/logo.svg" alt="BetterScroll 2.0" class="logo"> <span class="site-name can-hide">BetterScroll 2.0</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/en-US/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/docs/en-US/plugins/" class="nav-link">
  Plugin
</a></div><div class="nav-item"><a href="/docs/en-US/FAQ/" class="nav-link router-link-active">
  FAQ
</a></div><div class="nav-item"><a href="https://github.com/ustbhuangyi/better-scroll/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discuss
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/en-US/FAQ/diagnosis.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/docs/zh-CN/FAQ/diagnosis.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/ustbhuangyi/better-scroll" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/en-US/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/docs/en-US/plugins/" class="nav-link">
  Plugin
</a></div><div class="nav-item"><a href="/docs/en-US/FAQ/" class="nav-link router-link-active">
  FAQ
</a></div><div class="nav-item"><a href="https://github.com/ustbhuangyi/better-scroll/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discuss
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/en-US/FAQ/diagnosis.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/docs/zh-CN/FAQ/diagnosis.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/ustbhuangyi/better-scroll" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>FAQ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/en-US/FAQ/" aria-current="page" class="sidebar-link">FAQ</a></li><li><a href="/docs/en-US/FAQ/diagnosis.html" aria-current="page" class="active sidebar-link">BetterScroll's &quot;diagnosis&quot;</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="betterscroll-s-diagnosis"><a href="#betterscroll-s-diagnosis" class="header-anchor">#</a> BetterScroll's &quot;diagnosis&quot;</h1> <h3 id="question-1-why-can-t-my-betterscroll-work"><a href="#question-1-why-can-t-my-betterscroll-work" class="header-anchor">#</a> [Question 1] Why can't my BetterScroll work?</h3> <p>The problem basically lies in the <strong>Height Calculation Error</strong>. First of all, you must have a clear understanding of the scrolling principle of <code>BetterScroll</code>. For vertical scrolling, simply the height of the <code>wrapper</code> container is greater than the height of the <code>content</code> content, and the <code>translateY</code> is modified to achieve the purpose of scrolling. The principle of horizontal scrolling is similar. Then the calculation <strong>Scrollable Height</strong> is the logic necessary for <code>BetterScroll</code>. The general logic  is:</p> <p>1. <strong>Pictures with uncertain sizes</strong></p> <ul><li><p><strong>Reason</strong></p> <p>When js performs a calculation of the scrollable height, the image has not been rendered.</p></li> <li><p><strong>Solution</strong></p> <p>Call <code>bs.refresh()</code> inside the callback function of the image's <code>onload</code> to ensure that the correct height of the image is calculated before calculating the <strong>Scrollable Height</strong>.</p></li></ul> <p>2. <strong>Vue's keep-alive component</strong></p> <ul><li><p><strong>Scenes</strong></p> <p>Suppose there are two components of A and B wrapped by <code>keep-alive</code>, A component uses BetterScroll, does some operation in A component, pops up input keyboard, then enters B component, then returns to A component, <code>bs</code> is unable to scroll.</p></li> <li><p><strong>Reason</strong></p> <p>Because Vue's keep-alive's cache and the input keyboard pops up, it compresses the height of the viewable area, causing the previously calculated scrollable height to be incorrect.</p></li> <li><p><strong>Solution</strong></p> <p>You can call <code>bs.refresh()</code> on Vue's <code>activated</code> hook to recalculate the height or re-instantiate bs.</p></li></ul> <h3 id="question-2-why-do-brower-s-vertical-scrolling-failed-after-i-use-betterscroll-to-do-horizontal-scrolling"><a href="#question-2-why-do-brower-s-vertical-scrolling-failed-after-i-use-betterscroll-to-do-horizontal-scrolling" class="header-anchor">#</a> [Question 2] Why do brower's vertical scrolling failed after I use BetterScroll to do horizontal scrolling?</h3> <p>BetterScroll provides a feature of <code>slide</code>. If you implement a horizontal scrollin, such as <code>slide</code>. do vertical scrolling in the <code>slide</code> area, you can't bubble to the browser, so you can't manipulate the scroll bar of the native browser.</p> <ul><li><p><strong>Reason</strong></p> <p>The internal scrolling calculations of BetterScroll exist in the user's interaction. For example, the mobile terminal is the <code>touchstart/touchmove/touchend</code> event. The listeners of these events generally have the line <code>e.preventDefault()</code>, which will block the browser's default behavior so that the browser's scrollbar cannot be scrolled.</p></li> <li><p><strong>Solution</strong></p> <p>Configure the <code>eventPassthrough</code> attribute.</p> <div class="language-js extra-class"><pre class="language-js"><code>  Let bs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BScroll</span><span class="token punctuation">(</span><span class="token string">'.wrapper'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    eventPassthrough<span class="token operator">:</span> <span class="token string">'vertical'</span> <span class="token comment">// keep vertical native scrolling</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h3 id="question-3-why-can-t-i-pop-up-a-pop-up-window-after-using-betterscroll"><a href="#question-3-why-can-t-i-pop-up-a-pop-up-window-after-using-betterscroll" class="header-anchor">#</a> [Question 3] Why can't I pop up a pop-up window after using BetterScroll.</h3> <ul><li><p><strong>Reason</strong></p> <p><strong>question 2</strong> has been mentioned, it is caused by <code>e.preventDefault()</code> in touchstart.</p></li> <li><p><strong>Solution</strong></p> <p>Option 1: Configure the <code>preventDefaultException</code> property.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> bs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BScroll</span><span class="token punctuation">(</span><span class="token string">'.wrapper'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  preventDefaultException<span class="token operator">:</span> <span class="token punctuation">{</span>
    className<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^|\s)test(\s|$)</span><span class="token regex-delimiter">/</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>eventDefaultException</code> can be used to control the <code>e.preventDefault()</code> of the <code>touchstart</code> and <code>touchmove</code> events. If the above regular expression is used to check if the class name of the currently touched target element contains <code>test</code>, if passed, Then <code>e.preventDefault()</code> will not be called.</p> <p>Option 2: Configure the <code>preventDefault</code> property.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> bs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BScroll</span><span class="token punctuation">(</span><span class="token string">'.wrapper'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  preventDefault<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>preventDefault</code> is set to <code>false</code>, there are some side effects, it is generally recommended to use <strong>Option one</strong>.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The side effect is that the touch event may bubble up to the document, causing the document to be dragged. At this point you need to listen for the parent or ancestor element of the <code>wrapper</code> element, bind them to the touchmove event, and call <code>e.preventDefault()</code>.</p></div></li></ul> <h3 id="question-4-why-are-the-listeners-for-all-click-events-inside-betterscroll-content-not-triggered"><a href="#question-4-why-are-the-listeners-for-all-click-events-inside-betterscroll-content-not-triggered" class="header-anchor">#</a> [Question 4] Why are the listeners for all click events inside BetterScroll content not triggered?</h3> <ul><li><p><strong>Reason</strong></p> <p>Still caused by <code>e.preventDefault()</code>. On the mobile side, if you call <code>e.preventDefault()</code> inside the logic of <code>touchstart/touchmove/touchend</code>, it will prevent the execution of the click event of it and its child elements. Therefore, BetterScroll internally manages the dispatch of the <code>click</code> event, you only need the <code>click</code> configuration item.</p></li> <li><p><strong>Solution</strong></p> <p>Configure the <code>click</code> attribute.</p> <div class="language-js extra-class"><pre class="language-js"><code>  Let bs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BScroll</span><span class="token punctuation">(</span><span class="token string">'.wrapper'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    click<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h3 id="question-5-why-is-the-click-event-dispatched-twice-when-nesting-betterscroll"><a href="#question-5-why-is-the-click-event-dispatched-twice-when-nesting-betterscroll" class="header-anchor">#</a> [Question 5] Why is the click event dispatched twice when Nesting BetterScroll?</h3> <ul><li><p><strong>Reason</strong></p> <p>As stated in <strong>Question 4</strong>, the BetterScroll dispatches a <code>click</code> event internally, and nested scenes must have two or more bs.</p></li> <li><p><strong>Solution</strong></p> <p>You can manage the bubbling of events by instantiating inner BetterScroll's <code>stopPropagation</code> configuration item, or by instantiating inner BetterScroll's <code>click</code> configuration item to prevent multiple triggers of clicks.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> innerBS <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BScroll</span><span class="token punctuation">(</span><span class="token string">'.wrapper'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  stopPropagation<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// or</span>
<span class="token keyword">let</span> innerBS <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BScroll</span><span class="token punctuation">(</span><span class="token string">'.wrapper'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  click<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h3 id="question-6-why-do-i-listen-to-the-scroll-event-of-bs-why-not-execute-the-callback"><a href="#question-6-why-do-i-listen-to-the-scroll-event-of-bs-why-not-execute-the-callback" class="header-anchor">#</a> [Question 6] Why do I listen to the scroll event of bs, why not execute the callback?</h3> <ul><li><p><strong>Reason</strong></p> <p>BetterScroll does not dispatch the <code>scroll</code> event at any time because there is a performance penalty for getting the scroll position of bs. As for whether or not to distribute, it depends on the <code>probeType</code> configuration item.</p></li> <li><p><strong>Solution</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>  Let bs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BScroll</span><span class="token punctuation">(</span><span class="token string">'.div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    probeType<span class="token operator">:</span> <span class="token number">3</span> <span class="token comment">// real-time dispatch</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h3 id="question-7-in-two-vertically-nested-bs-scenes-why-move-the-inner-bs-will-cause-the-outer-layer-to-also-be-scrolled"><a href="#question-7-in-two-vertically-nested-bs-scenes-why-move-the-inner-bs-will-cause-the-outer-layer-to-also-be-scrolled" class="header-anchor">#</a> [Question 7] In two vertically nested bs scenes, why move the inner bs will cause the outer layer to also be scrolled.</h3> <ul><li><p><strong>Reason</strong></p> <p>The internal logic of BetterScroll is in the body of the listener function of the touch event. Since the touch event of the internal bs is triggered, it will naturally bubble to the outer bs.</p></li> <li><p><strong>Solution</strong></p> <p>Since you know the reason, there are corresponding solutions. For example, when you scroll the <strong>inner</strong> <code>bs</code>, listen for the <code>scroll</code> event and call the <strong>outer</strong> <code>bs.disable()</code> to disable the <strong>outer</strong> <code>bs</code>. When the <strong>inner</strong> <code>bs</code> scrolls to the bottom, it means that you need to scroll the <strong>outer</strong> <code>bs</code> at this time. At this time, call the <strong>outer</strong> <code>bs.enable()</code> to activate the outer layer and call the <strong>inner</strong> <code>bs.disable().</code> to forbid inner scrolling. In fact, think about it, this interaction is consistent with the nested scrolling behavior of the <code>Web browser</code>, except that the browser handles the various scrolling nesting logic for you, and the BetterScroll requires your own dispatched events and exposed APIs to fulfill.</p> <blockquote><p>The <a href="https://didi.github.io/cube-ui/example/#/scroll/v-scrolls" target="_blank" rel="noopener noreferrer">scroll<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> component of <code>cube-ui</code> gives a solution to this scenario. <a href="https://github.com/didi/cube-ui/blob/dev/src/components/scroll/scroll.vue" target="_blank" rel="noopener noreferrer">Code is here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></li></ul> <h3 id="question-8-in-the-vertical-bs-nesting-horizontal-bs-scene-why-does-the-vertical-movement-of-the-horizontal-bs-area-do-not-cause-vertical-scrolling-of-the-outer-vertical-bs"><a href="#question-8-in-the-vertical-bs-nesting-horizontal-bs-scene-why-does-the-vertical-movement-of-the-horizontal-bs-area-do-not-cause-vertical-scrolling-of-the-outer-vertical-bs" class="header-anchor">#</a> [Question 8] In the vertical bs nesting horizontal bs scene, why does the vertical movement of the horizontal bs area do not cause vertical scrolling of the outer vertical bs?</h3> <ul><li><p><strong>Reason</strong></p> <p>The reason is similar to <strong>Question 2</strong>, because <code>e.preventDefault()</code> affects the default scrolling behavior, causing the outer bs to not trigger the touch event.</p></li> <li><p><strong>Solution</strong></p> <p>The solution is to configure the <code>eventPassthrough</code> property of the inner bs to keep the default native vertical scrolling.</p> <div class="language-js extra-class"><pre class="language-js"><code>  Let innerBS <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BScroll</span><span class="token punctuation">(</span><span class="token string">'.wrapper'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    eventPassthrough<span class="token operator">:</span> <span class="token string">'vertical'</span> <span class="token comment">// keep vertical native scrolling</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ustbhuangyi/better-scroll/edit/dev/packages/vuepress-docs/docs/en-US/FAQ/diagnosis.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/25/2019, 4:23:12 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/en-US/FAQ/" class="prev router-link-active">
        FAQ
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/docs/assets/js/app.49c510b7.js" defer></script><script src="/docs/assets/js/6.78beaf32.js" defer></script><script src="/docs/assets/js/61.653b9ae3.js" defer></script>
  </body>
</html>
